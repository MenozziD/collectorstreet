<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collector Street - Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body class="theme-{{ (user.theme if (user is defined and user and user.theme) else 'original') }}" style="-ms-overflow-style: none;">
    
    <nav>
        <h1 class="logo-title">Collector Street</h1>
        <div class="actions icons">
            <a href="/home" class="icon-btn" title="Home" aria-label="Home">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                    <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5z" fill="currentColor"/>
                </svg>
            </a>
            <a href="/" class="icon-btn" title="Collezione" aria-label="Collezione">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                    <path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z" fill="currentColor"/>
                </svg>
            </a>
            
            <a href="/profile" class="icon-btn" title="Profilo" aria-label="Profilo">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                    <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4.42 0-8 2.24-8 5v1h16v-1c0-2.76-3.58-5-8-5z" fill="currentColor"/>
                </svg>
            </a>
        </div>
        <div class="sub-actions icons">
            <!-- EXPORT_SLOT 
            <button id="logoutBtn" class="icon-btn danger" title="Logout" aria-label="Logout">
                <svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true">
                    <path d="M10 17l1.41-1.41L8.83 13H21v-2H8.83l2.58-2.59L10 7l-5 5 5 5zM4 19h7v2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7v2H4z" fill="currentColor"/>
                </svg>
            </button>-->
        </div>
    </nav>

    <section class="home-container">
        <h2>Benvenuto, {{ user.nickname or user.username }}</h2>
        <!-- Card statistiche con grafici e indicatori -->
        <div class="stats-card">
            <h3>Statistiche collezione</h3>
            <div class="bar-chart">
                <div class="bar spent" style="width:0%"></div>
                <div class="bar sold" style="width:0%"></div>
            </div>
            <div class="stats-numbers">
                <span><strong>Speso:</strong> <span id="totalSpentVal">-</span></span>
                <span><strong>Venduto:</strong> <span id="totalSoldVal">-</span></span>
            </div>
            <div class="roi-indicator"><strong>ROI:</strong> <span id="roiPercentage">-</span></div>
            <button type="button" id="updateStatsBtn" class="update-stats-btn">Aggiorna statistiche</button>
        </div>
        <!-- Feed di news e attività -->
        <div class="feed-container">
            <!-- Due card di news con placeholder. In futuro saranno rimpiazzate da feed RSS personalizzati -->
            <!-- Card di news: verranno aggiornate dinamicamente da JS -->
            <div class="feed-card news-card" id="newsCard1">
                <h4>Novità</h4>
                <p>Caricamento notizie...</p>
            </div>
            <div class="feed-card news-card" id="newsCard2">
                <h4>Novità</h4>
                <p>Caricamento notizie...</p>
            </div>
            <!-- Card informative: numero oggetti e periodo collezione -->
            <div class="feed-card info-card" id="infoItemsCard">
                <h4>Numero oggetti</h4>
                <p>-</p>
            </div>
            <div class="feed-card info-card" id="infoPeriodCard">
                <h4>Giorni in collezione</h4>
                <p>-</p>
            </div>
            <!-- Due card di attività personali. Verranno riempite via JS -->
            <div class="feed-card personal-card">
                <h4>Attività recente</h4>
                <p>Caricamento...</p>
            </div>
            <div class="feed-card personal-card">
                <h4>Attività recente</h4>
                <p>Caricamento...</p>
            </div>
            <!-- Card attività globale visibile solo per admin -->
            {% if user.username == 'admin' %}
            <div class="feed-card" id="globalCard">
                <h4>Attività applicazione</h4>
                <p>Nessuna nuova attività.</p>
            </div>
            {% endif %}
        </div>
    </section>
    <!-- Script per gestione logout e dashboard -->
    <!-- Script dedicato alla pagina Home -->
    <script type="module" src="{{ url_for('static', filename='home.js') }}"></script>
</body>
</html>